<!DOCTYPE html>
<html lang="en">
<head>
  <title>UTD Mart</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<link rel="stylesheet" href="mystyle.css">

</head>
<body>


<header>
  <h2>UTD Mart</h2>
  <p align="left" id="date"></p>

</header>

<div class="topnav">
  <a  href="Fresh_Products.html">Fresh Products</a>
  <a  href="Frozen.html">Frozen</a>
  <a href="Pantry.html">Pantry</a>
  <a  href="BreakfastandCereal.html">Breakfast & Cereal</a>
  <a  class="active" href="Baking.html">Baking</a>
  <a  href="Snacks.html">Snacks</a>
  <a  href="Candy.html">Candy</a>
  <a  href="Specialty_shop.html">Specialty Shop</a>
  <a  href="Deals.html">Deals</a>
  <a  href="My_account.html">My Account</a>
  <a  href="About_us.html">About us</a>
  <a  href="Contact_us.html">Contact Us</a>
  <a href="cart.html">
    <i class="fa fa-shopping-cart"></i> Cart
</a>
</div>


<section>
  <!-- <nav>
    <ul>
      <img src="baking.jpeg" alt="Frozen" width="90%" height="240" padding-right="10">
      <br/>
      <br/>
     
      <li>Spices and Herbs</li>
      <li>Flavorings and Extracts</li>
      <li>Leavening Agents</li>
      <li>Dairy and Dairy Alternatives</li>
      <li>Fats and Oils</li>
      <li>Sweeteners</li>
      <li>Flour and Grains</li>
    </ul>
  </nav> -->
  <nav class="category-navigation">
    <ul>
      <img src="baking.jpeg" alt="Frozen" width="" height="240" padding-right="10">
      <br/>
      <h2>Bake by Category</h2>
      <ul>
        <li><a href="#" data-category="all">All Products</a></li>
        <li><a href="#" data-category="Pie-filling">Pie Fillings</a></li>
        <li><a href="#" data-category="Pie-crust">Crusts</a></li>
        <li><a href="#" data-category="Pie-pudding">pudding Mix</a></li>
        <li><a href="#" data-category="Pie-pans">pie pans</a></li>
        <!-- Add more category links as needed -->
      </ul>
    </ul>
  </nav>
  
  <article> 
    <h1 align="center" id="article-heading">Baking</h1>
    <div class="product-grid" id="product-grid">


      <!-- <div class="product-item" data-category="Pie-filling">
        <img src="baking/blueberry.jpg" alt="blueberrypiefill">
        <strong><p>Blueberry Pie Filling</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('blueberrypiefill', 10.99, 'baking')">Add to Cart</button>
      </div>

      <div class="product-item" data-category="Pie-filling">
        <img src="baking/cheeryfill.jpg" alt="cherrypiefill">
        <strong><p>Cheery Pie Filling</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('cherrypiefill', 10.99, 'baking')">Add to Cart</button>
      </div>

      <div class="product-item" data-category="Pie-filling">
        <img src="baking/grtvaluepiefilling.jpg" alt="naturalfill">
        <strong><p>Great Value Natural Pie Filling</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('naturalfill', 10.99, 'baking')">Add to Cart</button>
      </div>

      <div class="product-item" data-category="Pie-filling">
        <img src="baking/strawberrypie.jpg" alt="strawberrypie">
        <strong><p>Strawberry Pie Filling</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('strawberrypie', 8.99, 'baking')">Add to Cart</button>
      </div>

      <div class="product-item" data-category="Pie-crust">
        <img src="baking/pillsburrycrust.jpg" alt="pillsburrycrust">
        <strong><p>Strawberry Pie Filling</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('pillsburrycrust', 8.99, 'Pie-crust')">Add to Cart</button>
      </div>


      <div class="product-item" data-category="Pie-crust">
        <img src="baking/bakehousecrust.jpg" alt="bakehouse">
        <strong><p>Bake House Pie Crust</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('bakehouse', 10.99, 'Pie-crust')">Add to Cart</button>
      </div>


      <div class="product-item" data-category="Pie-crust">
        <img src="baking/bettycrockercrust.jpg" alt="bettycrockercrust">
        <strong><p>Betty Crocker Crust</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('bettycrockercrust', 10.99, 'Pie-crust')">Add to Cart</button>
      </div>


      <div class="product-item" data-category="Pie-crust">
        <img src="baking/glutenfreehoneymaidcrust.jpg" alt="honeymaid">
        <strong><p>Gluten Free honey Maid crust</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('honeymaid', 10.99, 'Pie-crust')">Add to Cart</button>
      </div>



      <div class="product-item" data-category="Pie-pudding">
        <img src="baking/southspoonpudding.jpg" alt="southspoon">
        <strong><p>South & Spoon Pie Pudding</p></strong>      
        <p>Price: $10.99</p>
        <button onclick="addToCart('southspoon', 10.99, 'Pie-pudding')">Add to Cart</button>
      </div>


      <div class="product-item" data-category="Pie-pudding">
        <img src="baking/jellovanilapudding.jpg" alt="jellovanila">
        <strong><p>Strawberry Pie Filling</p></strong>      
        <p>Price: $8.99</p>
        <button onclick="addToCart('jellovanila', 8.99, 'Pie-pudding')">Add to Cart</button>
      </div>


      <div class="product-item" data-category="Pie-pudding">
        <img src="baking/jellochocolatepudding.jpg" alt="jellochocolate">
        <strong><p>Strawberry Pie Filling</p></strong>      
        <p>Price: $9.99</p>
        <button onclick="addToCart('jellochocolate', 8.99, 'Pie-pudding')">Add to Cart</button>
      </div>



      <div class="product-item" data-category="Pie-pudding">
        <img src="baking/moundsdarchocopudding.jpg" alt="mounds">
        <strong><p>Mounds Dark Chocolate pudding mix</p></strong>      
        <p>Price: $11.99</p>
        <button onclick="addToCart('mounds', 8.99, 'Pie-pudding')">Add to Cart</button>
      </div>


      <div class="product-item" data-category="Pie-pans">
        <img src="baking/glasspan.jpg" alt="glass">
        <strong><p>Glass Pie Pan</p></strong>      
        <p>Price: $4.99</p>
        <button onclick="addToCart('glass', 4.99, 'Pie-pans')">Add to Cart</button>
      </div>

      <div class="product-item" data-category="Pie-pans">
        <img src="baking/disposablepeipans.jpg" alt="disposablepeipans">
        <strong><p>disposable Pie pans</p></strong>      
        <p>Price: $3.99</p> 
        <button onclick="addToCart('glass', 3.99, 'Pie-pans')">Add to Cart</button>
      </div>

      <div class="product-item" data-category="Pie-pans">
        <img src="baking/hemmabakpan.jpg" alt="Hemma">
        <strong><p>Hemma bake Pan</p></strong>      
        <p>Price: $4.99</p>
        <button onclick="addToCart('Hemma', 4.99, 'Pie-pans')">Add to Cart</button>
      </div> -->





    

      <!-- Repeat for additional product items (up to 9) -->
    </div>

    <h2>Tips for Making Delicious Pies</h2>
  <p>Creating the perfect pie can be a rewarding experience. Here are some tips to help you bake the best pie:</p>
  <ul>
    <li><strong>Use Cold Ingredients:</strong> When making pie crust, ensure your butter, shortening, and water are ice-cold. This helps create a flaky crust.</li>
    <li><strong>Don't Overwork the Dough:</strong> Handle the pie dough as little as possible to avoid toughness. Mix until just combined.</li>
    <li><strong>Chill the Dough:</strong> After making the dough, refrigerate it for at least 30 minutes to relax the gluten and prevent shrinking during baking.</li>
    <li><strong>Roll It Right:</strong> Roll out the dough on a floured surface, starting from the center and rolling outward. Turn the dough as you go for an even thickness.</li>
    <li><strong>Choose Quality Fillings:</strong> Use fresh and high-quality ingredients for your pie fillings. Fresh fruit, real spices, and quality extracts make a difference.</li>
    <li><strong>Ventilation:</strong> Cut slits or create decorative vents in the top crust to allow steam to escape during baking. This prevents the filling from boiling over.</li>
    <li><strong>Egg Wash:</strong> Brushing the top crust with an egg wash (beaten egg and a little water) can give your pie a beautiful, golden-brown finish.</li>
    <li><strong>Baking Time:</strong> Follow the recipe's baking time and temperature for the best results. Tent the pie with foil if it's browning too quickly.</li>
    <li><strong>Cooling:</strong> Allow your pie to cool completely before slicing. This lets the filling set and ensures clean slices.</li>
  </ul>
 
  </article>
</section>

<footer>
  <p align="left">DMK220001, Denish Kalariya, CS6314.001</p>
  <p>Thank you for Visiting my website</p>
</footer>

<script>
  // Get the current date and time
  // var currentDateTime = new Date();

  // // Format the date and time as a string
  // var dateTimeString = currentDateTime.toLocaleString(); // You can use other methods to format it differently

  // // Display the date and time in an HTML element
  // document.getElementById("datetime").textContent = "Current Date and Time: " + dateTimeString;

  var cart = initializeCart();
let products = [];
let inventory = [];
let productData = "";
let Inventorydata = "";

function initializeCart() {
  try {
    var cartData = localStorage.getItem('cart');
    return cartData ? JSON.parse(cartData) : {}; // Provide a default empty object if cartData is undefined
  } catch (error) {
    console.error('Error parsing cart data from local storage:', error);
    return {}; // Provide a default empty object in case of errors
  }
}
$(document).ready(function() {
   function updateDateTime() {
    const now = new Date();
    const currentDateTime = now.toLocaleString();
    $('#date').text(currentDateTime);
  }
  setInterval(updateDateTime, 1000);

  async function fetchProductData() {
    try {
      const response = await fetch("baking_products.json");
      const data = await response.json();
      products = data.products;
    } catch (error) {
      console.error("Error fetching product data:", error);
    }
  }
  fetchProductData();


  async function fetchProductInventory() {
    try {
      const response = await fetch("baking_Inventory.json");
      const data = await response.json();
      inventory = data.inventory;
    } catch (error) {
      console.error("Error fetching product data:", error);
    }
  }
  fetchProductInventory();


  async function initializeData() {
    await fetchProductData();
    await fetchProductInventory();

    console.log(products);
    console.log(inventory);
    createProductCards('all', products, inventory);
  }
  initializeData();



  function createProductCards(category, products, inventory) {
    const productGrid = $('#product-grid');
    productGrid.empty();

    products.forEach(product => {
      const productCategory = product.category;

      if (category === 'all' || productCategory === category) {
        const { name, image, price } = product;
        const productItem = $(`
          <div class="product-item" data-category="${productCategory}">
            <img src="${image}" alt="${name}">
            <p>${name}</p>
            <p>Price: $${price.toFixed(2)}</p>
            <button onclick="addToCart('${name}', ${price}, '${productCategory}')">Add to Cart</button>
          </div>
        `);
        productGrid.append(productItem);
      }
    });
  }


  $('.category-navigation a').click(function(event) {
    event.preventDefault();
    const selectedCategory = $(this).data('category');
    $('#article-heading').text(selectedCategory === 'all' ? 'All Products' : selectedCategory);
    createProductCards(selectedCategory, products, inventory);
  });

  document.getElementById('article-heading').textContent = 'All Products';
  createProductCards('all', products, inventory);
});



  // function updateDateTime() {
  //           const now = new Date();
  //           const currentDateTime = now.toLocaleString();
  //           document.getElementById('date').innerHTML = currentDateTime;
  //     }
  //     setInterval(updateDateTime, 1000);

  // const categoryLinks = document.querySelectorAll('[data-category]');
  //   categoryLinks.forEach(link => {
  //     link.addEventListener('click', function (event) {
  //       event.preventDefault();
  //       const selectedCategory = this.getAttribute('data-category');
  //       const productItems = document.querySelectorAll('.product-item');
  //       productItems.forEach(item => {
  //         const itemCategory = item.getAttribute('data-category');
  //         if (selectedCategory === 'all' || selectedCategory === itemCategory) {
  //           item.style.display = 'block';
  //         } else {
  //           item.style.display = 'none';
  //         }
  //         document.getElementById('article-heading').textContent = selectedCategory;
  //       });
  //     });
  //   });



    function initializeCart() {
  try {
    var cartData = localStorage.getItem('cart');
    return cartData ? JSON.parse(cartData) : {}; // Provide a default empty object if cartData is undefined
  } catch (error) {
    console.error('Error parsing cart data from local storage:', error);
    return {}; // Provide a default empty object in case of errors
  }
}

var cart = initializeCart(); // Call the function to initialize cart data

// Define inventory for products
// var inventory = {
//   blueberrypiefill : 2,
//   cherrypiefill : 3,
//   naturalfill : 3,
//   cherrypiefill : 3,
//   naturalfill : 6,
//   strawberrypie : 2,
//   pillsburrycrust : 1,
//   bakehouse : 5,
//   bettycrockercrust : 4,
//   honeymaid : 3,
//   southspoon : 5,
//   jellovanila : 5,
//   jellochocolate :3,
//   mounds : 4,
//   glass : 5,
//   disposablepeipans : 6,
//   Hemma : 3,
//   // Add more products and their initial inventory here
// };

function updateInventory(itemName, quantity) {
  if (inventory[itemName] !== undefined) {
    inventory[itemName] -= quantity;
  }
}

// Now you can use the 'cart' and 'inventory' variables for your operations

function addToCart(itemName, itemPrice, itemCategory) {
  // Check if the item is in stock
  if (inventory[itemName] === undefined || inventory[itemName] === 0) {
    alert(itemName + " is out of stock.");
    return; // Don't add the item to the cart if it's out of stock
  }

  // Modify item name to remove spaces or replace with underscores
  const modifiedItemName = itemName.replace(/ /g, '_');

  if (!cart[modifiedItemName]) {
    cart[modifiedItemName] = {
      price: itemPrice,
      category: itemCategory,
      quantity: 1,
      source : 'baking_Inventory.json'
    };
  } else {
    cart[modifiedItemName].quantity++;
  }

  // Update the inventory
  updateInventory(itemName, 1);

  // Update the local storage
  localStorage.setItem('cart', JSON.stringify(cart));
  alert(itemName + " added to cart!");

  console.log(inventory);




  // Update


  const xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function () {
    if (xhr.readyState == 4 && xhr.status == 200) {
      // Handle the response from the server, if needed
      console.log(xhr.responseText);
    }
  };

  const itemQuantity = 1;
  // Prepare data to send to the PHP file
  const data = `itemName=${encodeURIComponent(itemName)}&itemPrice=${encodeURIComponent(itemPrice)}&itemCategory=${encodeURIComponent(itemCategory)}&itemQuantity=${encodeURIComponent(itemQuantity)}`;
  console.log(data);
  // xhr.open('POST', 'fresh.php', true);
  xhr.open('POST', 'update_cart.php', true)
  // xhr.open('POST', 'fresh_inventorydb.php', true)
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  console.log(data);
  xhr.send(data);
}
</script>

</body>
</html>

