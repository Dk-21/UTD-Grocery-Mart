<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <title>UTD Mart</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="mystyle.css">

</head>
<body>


<header>
  <h2>UTD Mart</h2>
  <p id="datetime"></p>

</header>

<div class="topnav">
  <a  href="Fresh_Products.html">Fresh Products</a>
  <a  href="Frozen.html">Frozen</a>
  <a href="Pantry.html">Pantry</a>
  <a  href="BreakfastandCereal.html">Breakfast & Cereal</a>
  <a  href="Baking.html">Baking</a>
  <a  href="Snacks.html">Snacks</a>
  <a  class="active" href="Candy.html">Candy</a>
  <a  href="Specialty_shop.html">Specialty Shop</a>
  <a  href="Deals.html">Deals</a>
  <a  href="My_account.html">My Account</a>
  <a  href="About_us.html">About us</a>
  <a  href="Contact_us.html">Contact Us</a>
  <a href="cart.html">
    <i class="fa fa-shopping-cart"></i> Cart
</a>
</div>


<section>
  <nav>
    <ul>
      <img src="candy.jpg" alt="Frozen" width="90%" height="240" padding-right="10">
      <br/>
      <br/>
      <h2>Candies</h2>

      <li>Milk Chocolate</li>
      <li>Dark Chocolate</li>
      <li>Gummy Bears</li>
      <li>Jelly Beans</li>
      <li>Chocolate Truffles</li>
      <li>Licorice (e.g., Twizzlers)</li>
      <li>Sour Patch Kids</li>
      <li>Jolly Ranchers</li>
      <li>Skittles</li>
      <li>Starburst </li>
      <li>Candy Canes</li>
      <li>Peppermint Patties</li>
      <li>Reese's Peanut Butter Cups</li>
      <li>Nerds</li>
      <li>Laffy Taffy</li>
      <li>Fruit Roll-Ups</li>
      <li>Warheads</li>
      <li>Cotton Candy</li>
    </ul>
  </nav>

  
  <article>
    <h1>Candies</h1>
    
  <p> Welcome to the candy wonderland at UTD Mart! Step into a world of sweet indulgence where every confectionery desire comes to life. Our candy aisle is a paradise for those with a penchant for all things sugary. From the rich and creamy world of chocolates to the fruity bursts of gummies and the tongue-tingling allure of sour candies, there's a treat for every taste bud. We've carefully curated a selection that includes beloved classics, international treasures, and regional favorites, ensuring that your candy cravings are met with a delightful variety.
    <br/>
    <br/>
    At UTD Mart, we understand that candy is more than just a sweet treat; it's a source of comfort, nostalgia, and joy. Our candy section offers a diverse range of choices, from familiar brands to specialty and novelty candies that make every visit a delightful adventure. Whether you're searching for the perfect gift, planning a candy-themed party, or simply want to relive the memories of your favorite childhood sweets, our candy aisle invites you to savor the sweet moments.
    <br/>
    <br/>
    In addition to our diverse candy selection, we also offer seasonal and holiday-themed candies, making it easy to celebrate special occasions with a touch of sweetness. Our commitment to quality means that you'll always find fresh, delicious candies that bring smiles to faces young and old. Join us at UTD Mart, where every candy is a little treasure waiting to be discovered, savored, and shared. </p>


    <br/>
    <br/>

    <h2> Which Candy Do you want ???</h2>

<input type="radio" id="Jolly" name="candies" value="Jolly">
<label for="Jolly">Jolly Ranchers</label><br>
<input type="radio" id="Skittles" name="candies" value="Skittles">
<label for="skittles">Skittles</label><br>
<input type="radio" id="Nerds" name="candies" value="Nerds">
<label for="Nerds">Nerds</label><br>
<input type="radio" id="Cotton Candy" name="candies" value="Cotton Candy">
<label for="Cotton Candy">Cotton Candy</label><br>
<input type="radio" id="Starburst" name="candies" value="Starburst">
<label for="Starburst">Starburst</label><br>
  </article>
</section>

<footer>
  <p align="left">DMK220001, Denish Kalariya, CS6314.001</p>
  <p> © Thank you for Visiting my website</p>
</footer>


<script>
  // Get the current date and time
  var currentDateTime = new Date();

  // Format the date and time as a string
  var dateTimeString = currentDateTime.toLocaleString(); // You can use other methods to format it differently

  // Display the date and time in an HTML element
  document.getElementById("datetime").textContent = "Current Date and Time: " + dateTimeString;
</script>
</body>
</html>
 -->



 <!DOCTYPE html>
<html lang="en">
<head>
  <title>UTD Mart</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="mystyle.css">
</head>
<body>
  <header>
    <h2>UTD Mart</h2>
    <p align="left" id="date"></p>
  </header>
  
  <div class="topnav">
    <a href="Fresh_Products.html">Fresh Products</a>
    <a href="Frozen.html">Frozen</a>
    <a href="Pantry.html">Pantry</a>
    <a href="BreakfastandCereal.html">Breakfast & Cereal</a>
    <a href="Baking.html">Baking</a>
    <a  href="Snacks.html">Snacks</a>
    <a class="active" href="Candy.html">Candy</a>
    <a href="Specialty_shop.html">Specialty Shop</a>
    <a href="Deals.html">Deals</a>
    <a href="My_account.html">My Account</a>
    <a href="About_us.html">About us</a>
    <a href="Contact_us.html">Contact Us</a>
    <a href="cart.html">
      <i class="fa fa-shopping-cart"></i> Cart
    </a>
  </div>

  <section>

    <nav>
      <ul>
        <img src="candy.jpg" alt="Frozen" width="90%" height="240" padding-right="10">
        <br/>
        <br/>

      <!-- <li>Potato Chips</li>
      <li>Chocolate Bars</li>
      <li>Popcorn</li>
      <li>Granola Bars</li>
      <li>Mixed Nuts</li>
      <li>Cheese Puffs</li> -->
      <!-- <li>Fruit Bars</li>
      <li>Gummy Candy</li>
      <li>Hummus with Veggie Sticks</li>
      <li>Trail Mix</li>
      <li>Pretzels</li>
      <li>Salsa with Tortilla Chips</li>
      <li>Peanut Butter with Apple Slices</li>
      <li>Beef Jerky</li>
      <li>Rice Cakes</li> -->
      <li>MandM</li>
      <li>jolly</li>
       <li>Quest</li>
      <li>Rossana</li>
      <li>Skittles</li> 
      <li>Yumearth</li>
      <li>haribo</li>
       <li>gomets</li> 
      <li>katzer</li>  
      <li>milky</li>
      </ul>
    </nav>


    <article>
      <div align="center">
      <h2 >Candies</h2>
      <input type="text" id="snackSearch" placeholder="Enter Candy Name" oninput="filtercandies()">
      <p id="error" style="color: red;"></p>
      </div>
      
      <!-- Snack grid view will be displayed here -->


      <div id="product-grid" class="product-grid"> 



        <!-- <div class="product-item" data-category="candies">
          <img src="Candies/mandm.jpeg" alt="mandm">
          <strong><p>M&M mini candies</p></strong>
          <p>Price: $2.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_mandm" placeholder="Enter Quantity">
          <button onclick="addToCart('MandM', 2.99, 'Candies', 'snackQuantity_mandm')">Add to Cart</button>
        </div>


        <div class="product-item" data-category="candies">
          <img src="Candies/jolly.jpg" alt="jolly">
          <strong><p>Jolly</p></strong>
          <p>Price: $0.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_jolly" placeholder="Enter Quantity">
          <button onclick="addToCart('jolly', 0.99, 'Candies', 'snackQuantity_jolly')">Add to Cart</button>
        </div>


        <div class="product-item" data-category="candies">
          <img src="Candies/quest.jpg" alt="quest">
          <strong><p>Quest Chocolatey Coated Peanut Candies</p></strong>
          <p>Price: $1.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_quest" placeholder="Enter Quantity">
          <button onclick="addToCart('Quest', 1.99, 'Candies', 'snackQuantity_quest')">Add to Cart</button>
        </div>


        <div class="product-item" data-category="candies">
          <img src="Candies/rossana.jpg" alt="rossana">
          <strong><p>Rossana Rosse Candies – La Bottega della Nonna</p></strong>
          <p>Price: $2.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_rossana" placeholder="Enter Quantity">
          <button onclick="addToCart('Rossana', 2.99, 'Candies', 'snackQuantity_rossana')">Add to Cart</button>
        </div>

        <div class="product-item" data-category="candies">
          <img src="Candies/skittles.jpg" alt="skittles">
          <strong><p>Skittles And Starburst Fun Size Mix Bite Size Candies</p></strong>
          <p>Price: $4.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_skittles" placeholder="Enter Quantity">
          <button onclick="addToCart('Skittles', 2.99, 'Candies', 'snackQuantity_skittles')">Add to Cart</button>
        </div>


        <div class="product-item" data-category="candies">
          <img src="Candies/yumearth.jpg" alt="yumearth">
          <strong><p>Organic Fruit Hard Candy</p></strong>
          <p>Price: $5.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_yumearth" placeholder="Enter Quantity">
          <button onclick="addToCart('Yumearth', 5.99, 'Candies', 'snackQuantity_yumearth')">Add to Cart</button>
        </div>

        <div class="product-item" data-category="candies">
          <img src="Candies/haribo.jpg" alt="haribo">
          <strong><p>Haribo "Happy Snowmen" German Marshmallow Candies, 175g</p></strong>
          <p>Price: $7.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_haribo" placeholder="Enter Quantity">
          <button onclick="addToCart('haribo', 5.99, 'Candies', 'snackQuantity_haribo')">Add to Cart</button>
        </div>


        <div class="product-item" data-category="candies">
          <img src="Candies/gomets.jpg" alt="gomets">
          <strong><p>Dori Gomets (Fruit-Flavored Jelly Candy) (Pack of 4)</p></strong>
          <p>Price: $4.49</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_gomets" placeholder="Enter Quantity">
          <button onclick="addToCart('gomets', 4.49, 'Candies', 'snackQuantity_gomets')">Add to Cart</button>
        </div>


        <div class="product-item" data-category="candies">
          <img src="Candies/katzer.jpg" alt="katzer">
          <strong><p>MINI HITSCHIES CHEW CANDIES SOUR MIX in a Standard Bag </p></strong>
          <p>Price: $5.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_katzer" placeholder="Enter Quantity">
          <button onclick="addToCart('katzer', 5.99, 'Candies', 'snackQuantity_katzer')">Add to Cart</button>
        </div>


        <div class="product-item" data-category="candies">
          <img src="Candies/milky.jpg" alt="milky">
          <strong><p>Peko-Chan Milky Candy</p></strong>
          <p>Price: $7.99</p>
          <label for="candyQuantity">Quantity:</label>
          <input type="number" id="snackQuantity_milky" placeholder="Enter Quantity">
          <button onclick="addToCart('milky', 7.99, 'Candies', 'snackQuantity_milky')">Add to Cart</button>
        </div> -->


        <!-- Add more snack items here -->
      </div>
    </article>
  </section>

  <footer>
    <p align="left">DMK220001, Denish Kalariya, CS6314.001</p>
    <p>Thank you for Visiting my website</p>
  </footer>

  <script>
    // Get the current date and time
    function updateDateTime() {
            const now = new Date();
            const currentDateTime = now.toLocaleString();
            document.getElementById('date').innerHTML = currentDateTime;
      }
      setInterval(updateDateTime, 1000);
    
    // Function to add snack to the cart (You can implement your cart logic here)
    // function addToCart(snackName, snackPrice, snackCategory) {
    //   // Get the quantity input value
    //   var quantityInput = document.getElementById("snackQuantity");
    //   var quantity = parseInt(quantityInput.value, 10);
  
    //   if (isNaN(quantity) || quantity <= 0) {
    //     document.getElementById("error").textContent = "Please enter a valid quantity.";
    //   } else {
    //     document.getElementById("error").textContent = "";
    //     // Implement cart logic here
    //   }
    // }

    var productData = ""; // Empty string for now
var inventoryData = ""; // Empty string for now
// var cart = {};
function initializeCart() {
  try {
    var cartData = localStorage.getItem('cart');
    return cartData ? JSON.parse(cartData) : {}; // Provide a default empty object if cartData is undefined
  } catch (error) {
    console.error('Error parsing cart data from local storage:', error);
    return {}; // Provide a default empty object in case of errors
  }
}

// Fetch existing cart data from local storage
var cart = initializeCart(); // Call the function to initialize cart data
var products;
var inventory;


  
  // function addToCart(itemName, itemPrice, itemCategory) {
  // // Check if the item is in stock
  // if (inventory[itemName] === undefined || inventory[itemName] === 0) {
  //   alert(itemName + " is out of stock.");
  //   return; // Don't add the item to the cart if it's out of stock
  // }

  // // Get the quantity input value
  // var quantityInput = document.getElementById("snackQuantity");
  // var quantity = parseInt(quantityInput.value, 10);

  // if (isNaN(quantity) || quantity <= 0) {
  //   alert("Please enter a valid quantity.");
  //   return; // Don't add the item to the cart if the quantity is invalid
  // }

fetch("Candy_products.xml")
  .then((response) => response.text())
  .then((data) => {
    productData = data;
    initializeData();
  })
  .catch((error) => console.error("Error fetching product data:", error));

// console.log(productData);

// Fetch inventory data from the XML file
fetch("Candy_inventory.xml")
  .then((response) => response.text())
  .then((data) => {
    inventoryData = data;
    initializeData();
  })
  .catch((error) => console.error("Error fetching inventory data:", error));


  // console.log(inventoryData);
  

  function initializeData() {
  console.log(productData);
  console.log(inventoryData);
  if (productData && inventoryData) {
    var parser = new DOMParser();

    // Parse product data
    var productXmlDoc = parser.parseFromString(productData, "text/xml");
    products = productXmlDoc.querySelectorAll("product");

    // Parse inventory data
    var inventoryXmlDoc = parser.parseFromString(inventoryData, "text/xml");
    inventory = {};
    var inventoryProducts = inventoryXmlDoc.querySelectorAll("product");


    for (var i = 0; i < inventoryProducts.length; i++) {
      var productName = inventoryProducts[i].getAttribute("name");
      var productQuantity = parseInt(
        inventoryProducts[i].getAttribute("quantity"),
        10
      );
      inventory[productName] = productQuantity;
    }
    console.log(inventory);
    // Call the function to create product cards after data is initialized
    createProductCards('all');
  }
}




function createProductCards(category) {
      const productGrid = document.getElementById('product-grid');
      productGrid.innerHTML = ''; // Clear existing products

      for (let i = 0; i < products.length; i++) {
        const product = products[i];
        const productCategory = product.getAttribute('category');

        if (category === 'all' || productCategory === category) {
          const productName = product.querySelector('name').textContent;
          const productPrice = parseFloat(product.querySelector('price').textContent);
          const productQuantityInputId = `snackQuantity_${productName.replace(/ /g, '_')}`;
          // console.log(productQuantityInputId);

          const productItem = document.createElement('div');
          productItem.classList.add('product-item');
          productItem.setAttribute('data-category', productCategory);

          productItem.innerHTML = `
            <img src="${product.querySelector('image').textContent}" alt="${productName}">
            <strong><p>${productName}</p></strong>
            <p>Price: $${productPrice.toFixed(2)}</p>
            <label for="${productQuantityInputId}">Quantity:</label>
            <input type="number" id="${productQuantityInputId}" placeholder="Enter Quantity">
            <button onclick="addToCart('${productName}', ${productPrice}, '${productCategory}', '${productQuantityInputId}')">Add to Cart</button>
          `;

          productGrid.appendChild(productItem);
        }
      }
    }


document.querySelectorAll('.category-navigation a').forEach(function(link) {
  link.addEventListener('click', function(event) {
    event.preventDefault();
    const selectedCategory = link.getAttribute('data-category');
    document.getElementById('article-heading').textContent = selectedCategory === 'all' ? 'All Products' : selectedCategory;
    createProductCards(selectedCategory);
  });
});

// Initialize with 'All Products' when the page loads
document.getElementById('article-heading').textContent = 'All Products';
createProductCards('all');

console.log(productData);
console.log(inventoryData);

  
  // function initializeCart() {
  //     try {
  //       var cartData = localStorage.getItem('cart');
  //       return cartData ? JSON.parse(cartData) : {}; // Provide a default empty object if cartData is undefined
  //     } catch (error) {
  //       console.error('Error parsing cart data from local storage:', error);
  //       return {}; // Provide a default empty object in case of errors
  //     }
  //   }

    // var cart = initializeCart();

    function updateInventory(itemName, quantity) {
  const modifiedItemName = itemName.replace(/ /g, '_');
  if (inventory[modifiedItemName] !== undefined) {
    inventory[modifiedItemName] -= quantity;
  }
}



// var inventory = {
//   MandM: 50, // Initial quantity of M&M mini candies
//   jolly: 50, // Initial quantity of Jolly
//   Quest: 50, // Initial quantity of Quest Chocolatey Coated Peanut Candies
//   Rossana: 50, // Initial quantity of Rossana Rosse Candies – La Bottega della Nonna
//   Skittles: 50, // Initial quantity of Skittles And Starburst Fun Size Mix Bite Size Candies
//   Yumearth: 50, // Initial quantity of Organic Fruit Hard Candy
//   haribo: 50, // Initial quantity of Haribo "Happy Snowmen" German Marshmallow Candies, 175g
//   gomets: 50, // Initial quantity of Dori Gomets (Fruit-Flavored Jelly Candy) (Pack of 4)
//   katzer: 50, // Initial quantity of MINI HITSCHIES CHEW CANDIES SOUR MIX in a Standard Bag
//   milky: 50, // I
// };


// function addToCart(itemName, itemPrice, itemCategory, quantityInputId) {
//   var quantityInput = document.getElementById(quantityInputId);
//   var quantity = parseInt(quantityInput.value, 10);

//   const modifiedItemName = itemName.replace(/ /g, '_');

//   if (isNaN(quantity) || quantity <= 0) {
//     document.getElementById("error").textContent = "Please enter a valid quantity.";
//   } else if (inventory[modifiedItemName] !== undefined && quantity > inventory[modifiedItemName]) {
//     document.getElementById("error").textContent = "Not enough quantity in inventory, Out of Stock";
//   } else {
//     document.getElementById("error").textContent = "";

//     if (!cart[modifiedItemName]) {
//       cart[modifiedItemName] = {
//         price: itemPrice,
//         category: itemCategory,
//         quantity: quantity
//       };
//     } else {
//       cart[modifiedItemName].quantity += quantity;
//     }

//     // Update the inventory
//     updateInventory(itemName, quantity);

//     // Update the local storage
//     localStorage.setItem('cart', JSON.stringify(cart));
//     alert(itemName + " added to cart!");
//     console.log(inventory);

//     // Update

//     const xhr = new XMLHttpRequest();
//     xhr.onreadystatechange = function () {
//       if (xhr.readyState == 4 && xhr.status == 200) {
//         // Handle the response from the server, if needed
//         console.log(xhr.responseText);
//       }
//     };

//     const data = `itemName=${encodeURIComponent(itemName)}&itemPrice=${encodeURIComponent(itemPrice)}&itemCategory=${encodeURIComponent(itemCategory)}&quantity=${encodeURIComponent(quantity)}`;
//     xhr.open('POST', 'Candy_inventory.php', true);
//     xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
//     xhr.send(data);

//   }
// }


function addToCart(itemName, itemPrice, itemCategory, quantityInputId) {
  var quantityInput = document.getElementById(quantityInputId);
  var quantity = parseInt(quantityInput.value, 10);

  const modifiedItemName = itemName.replace(/ /g, '_');

  if (isNaN(quantity) || quantity <= 0) {
    document.getElementById("error").textContent = "Please enter a valid quantity.";
  } else if (inventory[modifiedItemName] !== undefined && quantity > inventory[modifiedItemName]) {
    document.getElementById("error").textContent = "Not enough quantity in inventory, Out of Stock";
  } else {
    document.getElementById("error").textContent = "";

    if (!cart[modifiedItemName]) {
      cart[modifiedItemName] = {
        price: itemPrice,
        category: itemCategory,
        quantity: quantity,
        source : 'Candy_inventory.xml'
        
      };
    } else {
      cart[modifiedItemName].quantity += quantity;
    }

    // Update the inventory
    updateInventory(itemName, quantity);

    // Update the local storage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Update the UI or log the addition with quantity
    console.log(`${itemName} added to cart! Quantity: ${quantity}`);
    console.log(inventory);

    // Create the POST request
    const xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status == 200) {
        // Handle the response from the server, if needed
        console.log(xhr.responseText);
      }
    };

    // const data = `itemName=${encodeURIComponent(itemName)}&itemPrice=${encodeURIComponent(itemPrice)}&itemCategory=${encodeURIComponent(itemCategory)}&quantity=${encodeURIComponent(quantity)}`;
    // xhr.open('POST', 'Candy_inventory.php', true);
    // xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    // xhr.send(data);
    const data = `itemName=${encodeURIComponent(itemName)}&itemPrice=${encodeURIComponent(itemPrice)}&itemCategory=${encodeURIComponent(itemCategory)}&quantity=${encodeURIComponent(quantity)}`;
    xhr.open('POST', 'Candy.php', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send(data); 
  }
}



    // function filtercandies() {
    //   var searchInput = document.getElementById("snackSearch").value.toLowerCase();
    //   var candyItems = document.querySelectorAll(".product-item");

    //   candyItems.forEach(function(item) {
    //     var candyName = item.getElementsByTagName("strong")[0].textContent.toLowerCase();
    //     if (candyName.includes(searchInput)) {
    //       item.style.display = "block";
    //     } else {
    //       item.style.display = "none";
    //     }
    //   });
    // }

  function filtercandies() {
  var searchInput = document.getElementById("snackSearch").value.toLowerCase();
  var snackItems = document.querySelectorAll(".product-item");
  var errorElement = document.getElementById("error");

  if (!isNaN(searchInput) && searchInput.trim() !== "") {
    errorElement.textContent = "Please enter a valid snack name, not a number.";
  } else {
    errorElement.textContent = "";

    snackItems.forEach(function (item) {
      var snackName = item.getElementsByTagName("strong")[0].textContent.toLowerCase();
      if (snackName.includes(searchInput)) {
        item.style.display = "block";
      } else {
        item.style.display = "none";
      }
    });
  }
}
  </script>
</body>
</html>

